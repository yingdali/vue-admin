{"remainingRequest":"G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\webstore\\vue-admin\\src\\views\\power\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstore\\vue-admin\\src\\views\\power\\Roles.vue","mtime":1652059916786},{"path":"G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstore\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlJvbGVzIiwKICAgIGRhdGEoKSB7CiAgICAgIC8v6aqM6K+B6YKu566x5qCh6aqM6KeE5YiZCiAgICAgIGxldCBjaGVja0VtYWlsPShydWxlLHZhbHVlLGNhbGxiYWNrKT0+ewogICAgICAgIGNvbnN0IHJlZ0VtYWlsID0gL14oW2EtekEtWjAtOV8tXSkrQChbYS16QS1aMC05Xy1dKSsoXC5bYS16QS1aMC05Xy1dKSsvCiAgICAgICAgaWYocmVnRW1haWwudGVzdCh2YWx1ZSkpewogICAgICAgICAgLy/lkIjms5XnmoTpgq7nrrEKICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpCiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5ZCI5rOV55qE6YKu566xJykpCiAgICAgIH0KICAgICAgLy/pqozor4HmiYvmnLrlj7fmoKHpqozop4TliJkKICAgICAgbGV0IGNoZWNrTW9iaWxlPShydWxlLHZhbHVlLGNhbGxiYWNrKT0+ewogICAgICAgIC8vIOmqjOivgeaJi+acuuWPt+eahOato+WImeihqOi+vuW8jwogICAgICAgIGNvbnN0IHJlZ01vYmlsZSA9IC9eKDB8ODZ8MTc5NTEpPygxM1swLTldfDE1WzAxMjM1Njc4OV18MTdbNjc4XXwxOFswLTldfDE0WzU3XSlbMC05XXs4fSQvCiAgICAgICAgLy/lpoLmnpxyZWdNb2JpbGXnmoR0ZXN05pa55rOV5LitdmFsdWXnu4/ov4fmoKHpqozlkIjms5XnmoTmiYvmnLrlj7cKICAgICAgICBpZiAocmVnTW9iaWxlLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICAvL+aJp+ihjGNhbGxiYWNr5pa55rOVCiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKQogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTmiYvmnLrlj7cnKSkKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIC8v5omA5pyJ6KeS6Imy5YiX6KGo5pWw5o2uCiAgICAgICAgcm9sZWxpc3Q6IFtdLAogICAgICAgIC8v5re75Yqg6KeS6Imy55qE6KGo5Y2V5pWw5o2uCiAgICAgICAgYWRkRm9ybTogewogICAgICAgICAgcm9sZUlkOiAnJywKICAgICAgICAgIHJvbGVOYW1lOiAnJywKICAgICAgICAgIHJvbGVEZXNjOiAnJwogICAgICAgIH0sCiAgICAgICAgLy/mn6Xor6LliLDnmoTop5LoibLkv6Hmga/lr7nosaEKICAgICAgICBlZGl0Rm9ybTp7fSwKICAgICAgICAvL+aOp+WItua3u+WKoOinkuiJsuWvueivneahhueahOaYvuekuuWSjOmakOiXjwogICAgICAgIGFkZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgIC8v5o6n5Yi25L+u5pS555So5oi35a+56K+d5qGG55qE5pi+56S65ZKM6ZqQ6JePCiAgICAgICAgZWRpdERpYWxvZ1Zpc2libGxlOmZhbHNlLAogICAgICAgIC8v5o6n5Yi25YiG6YWN5p2D6ZmQ5a+56K+d5qGG55qE5pi+56S65ZKM6ZqQ6JePCiAgICAgICAgc2V0UmlnaHREaWFsb2dWaXNpYmxsZTpmYWxzZSwKICAgICAgICAvL+aJgOacieadg+mZkOeahOaVsOaNrgogICAgICAgIHJpZ2h0c0xpc3Q6W10sCiAgICAgICAgLy/moJHlvaLmjqfku7bnmoTlsZ7mgKfnu5Hlrprlr7nosaEKICAgICAgICB0cmVlUHJvcHM6ewogICAgICAgICAgLy9sYWJlbOWxleekuuWPr+eci+WIsOeahOWxnuaApwogICAgICAgICAgbGFiZWw6J2F1dGhOYW1lJywKICAgICAgICAgIC8v54i25a2Q6IqC54K56YCa6L+HY2hpbGRyZW7lsZ7mgKflrp7njrDltYzlpZcKICAgICAgICAgIGNoaWxkcmVuOidjaGlsZHJlbicKICAgICAgICB9LAogICAgICAgIC8v6buY6K6k6YCJ5Lit6IqC54K555qEaWTlgLzmlbDnu4QKICAgICAgICBkZWZrZXlzOltdLAogICAgICAgIC8v5b2T5YmN5Y2z5bCG5YiG6YWN5p2D6ZmQ55qE6KeS6ImyaWQKICAgICAgICByb2xlSWQ6JycsCiAgICAgICAgLy/mt7vliqDnlKjmiLfooajljZXnmoTop4TliJnlr7nosaEKICAgICAgICBhZGRSb2xlUnVsZXM6IHsKICAgICAgICAgIHJvbGVOYW1lOiBbCiAgICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuWQjeensCcsIHRyaWdnZXI6ICdibHVyJ30sCiAgICAgICAgICAgIHttaW46IDMsIG1heDogMTAsIG1lc3NhZ2U6ICfnlKjmiLflkI3plb/luqblnKggMyDliLAgMTAg5Liq5a2X56ym5LmL6Ze0JywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgICAgXSwKCQkgIHJvbGVEZXNjOiBbCgkJICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuaPj+i/sCcsIHRyaWdnZXI6ICdibHVyJ30sCgkJICAgIHttaW46IDMsIG1heDogMTAsIG1lc3NhZ2U6ICfop5LoibLmj4/ov7Dplb/luqblnKggMyDliLAgMTAg5Liq5a2X56ym5LmL6Ze0JywgdHJpZ2dlcjogJ2JsdXInfQoJCSAgXSwKICAgICAgICB9LAogICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgLy/ojrflj5bmiYDmnInop5LoibLnmoTliJfooagKICAgICAgZ2V0Um9sZXNMaXN0KCkgewogICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdyb2xlcycpCiAgICAgICAgICAudGhlbigoe2RhdGE6cmVzfSkgPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQogICAgICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W6KeS6Imy5YiX6KGo5aSx6LSlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5yb2xlbGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICB9KQogICAgICB9LAogICAgICAvL+eCueWHu+aMiemSru+8jOa3u+WKoOinkuiJsgogICAgICBhZGRSdWxlcygpIHsKICAgICAgICB0aGlzLiRyZWZzLmFkZFJ1bGVzUmVmLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuCiAgICAgICAgICAvL+WPr+S7peWPkei1t+a3u+WKoOeUqOaIt+eahOivt+axggogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCdyb2xlcycsIHRoaXMuYWRkRm9ybSkudGhlbigoe2RhdGE6cmVzfSkgPT4gewogICAgICAgICAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOeUqOaIt+Wksei0pScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOeUqOaIt+aIkOWKnycpCiAgICAgICAgICAgICAgLy/pmpDol4/mt7vliqDnlKjmiLfnmoTlr7nor53moYYKICAgICAgICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgIC8v6YeN5paw6I635Y+W55So5oi35YiX6KGoCiAgICAgICAgICAgICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIC8v5bGV56S657yW6L6R6KeS6Imy55qE5a+56K+d5qGGCiAgICAgIHNob3dFZGl0RGlhbG9nKGlkKXsKICAgICAgICAvLyBjb25zb2xlLmxvZyggaWQpCiAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ3JvbGVzLycraWQpLnRoZW4oKHtkYXRhOnJlc30pPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQogICAgICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i55So5oi35L+h5oGv5aSx6LSlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5lZGl0Rm9ybT1yZXMuZGF0YQogICAgICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxsZT10cnVlCiAgICAgICAgICB9KQogICAgICB9LAogICAgICAvL+S/ruaUueinkuiJsuS/oeaBr+W5tuaPkOS6pAogICAgICBlZGl0VXNlcmluZm8oKXsKICAgICAgLy/ojrflj5booajljZXpooTmoKHpqoznu5PmnpzkuLp0cnVl5o+Q5LqkCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi52YWxpZGF0ZSh2YWlsZD0+ewogICAgICAgICAgaWYgKCF2YWlsZCkgcmV0dXJuCiAgICAgICAgICAvL+WPkei1t+S/ruaUueeUqOaIt+S/oeaBr+eahOaVsOaNruivt+axggogICAgICAgICAgdGhpcy4kaHR0cC5wdXQoYHJvbGVzL2ArdGhpcy5lZGl0Rm9ybS5yb2xlSWQsewogICAgICAgICAgICByb2xlTmFtZTp0aGlzLmVkaXRGb3JtLnJvbGVOYW1lLAogICAgICAgICAgICByb2xlRGVzYzp0aGlzLmVkaXRGb3JtLnJvbGVEZXNjCiAgICAgICAgICB9KS50aGVuKCh7ZGF0YTpyZXN9KT0+IHsKICAgICAgICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmm7TmlrDnlKjmiLfkv6Hmga/lpLHotKUnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDnlKjmiLfkv6Hmga/miJDlip8nKQogICAgICAgICAgICAgIC8v6ZqQ6JeP5re75Yqg55So5oi355qE5a+56K+d5qGGCiAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsbGU9ZmFsc2UKICAgICAgICAgICAgICAvL+mHjeaWsOiOt+WPlueUqOaIt+WIl+ihqAogICAgICAgICAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICAgICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9LAogICAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE6KeS6Imy5L+h5oGvCiAgICAgIHJlbW92ZUJ5SWQoaWQpewogICAgICAgIC8v5by55qGG6K+i6Zeu5piv5ZCm5Yig6ZmkCiAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l55So5oi3LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRodHRwLmRlbGV0ZShgcm9sZXMvYCtpZCkKICAgICAgICAgICAgLnRoZW4ocmVzPT4gewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk6KeS6Imy5aSx6LSlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6KeS6Imy5oiQ5YqfJykKICAgICAgICAgICAgICAvL+WIoOmZpOaIkOWKn+WQjuWIt+aWsOaVsOaNruWIl+ihqAogICAgICAgICAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9LAogICAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE5p2D6ZmQCiAgICAgIHJlbW92ZVJpZ2h0QnlpZChyb2xlLHJpZ2h0SWQpewogICAgICAgLy/lvLnmoYbmj5DnpLrmmK/lkKbliKDpmaQKICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xmlofku7YsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJywKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kaHR0cC5kZWxldGUoYHJvbGVzLyR7cm9sZS5pZH0vcmlnaHRzLyR7cmlnaHRJZH1gKQogICAgICAgICAgICAudGhlbigoe2RhdGE6cmVzfSk9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk6KeS6Imy5aSx6LSlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8v5Yig6Zmk5oiQ5Yqf5ZCO5Yi35paw5pWw5o2u5YiX6KGoCiAgICAgICAgICAgICAgcm9sZS5jaGlsZHJlbj1yZXMuZGF0YQogICAgICAgICAgICB9KQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgLy/lsZXnpLrliIbphY3mnYPpmZDnmoTlr7nor53moYYKICAgICAgc2hvd1NldFJpZ2h0RGlhbG9nKHJvbGUpewogICAgICAgIC8v5L+d5a2Y6YCJ5Lit6IqC54K5aWQKICAgICAgICB0aGlzLnJvbGVJZD1yb2xlLmlkCiAgICAgICAgLy/ojrflj5bmiYDmnInmnYPpmZDmlbDmja4KICAgICAgICB0aGlzLiRodHRwLmdldCgncmlnaHRzL3RyZWUnKQogICAgICAgICAgLnRoZW4ocmVzPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmnYPpmZDliJfooajlpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+aKiuiOt+WPluWIsOeahOadg+mZkOaVsOaNruS/neWtmOWIsGRhdGHkuK0KICAgICAgICAgICAgdGhpcy5yaWdodHNMaXN0PXJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yaWdodHNMaXN0KQogICAgICAgICAgfSkKICAgICAgICAvL+mAkuW9kuiOt+WPluS4iee6p+iKgueCuQogICAgICAgIHRoaXMuZ2V0TGVhZktleXMocm9sZSx0aGlzLmRlZmtleXMpCiAgICAgICAgdGhpcy5zZXRSaWdodERpYWxvZ1Zpc2libGxlPXRydWUKICAgICAgfSwKICAgICAgLy/pgJrov4fpgJLlvZLnmoTlvaLlvI/ojrflj5bop5LoibLkuIvmiYDmnInkuInnuqfmnYPpmZDnmoRpZAogICAgICAvL+W5tuS/neWtmOWIsGRlZmtleXPmlbDnu4TkuK0KICAgICAgZ2V0TGVhZktleXMobm9kZSxhcnIpewogICAgICAvL+WmguaenOW9k+WJjW5vZGXoioLngrnkuI3ljIXlkKtjaGlsZHJlbuWxnuaApwogICAgICAvL+WImeaYr+S4iee6p+iKgueCuQogICAgICAgIGlmKCFub2RlLmNoaWxkcmVuKXsKICAgICAgICAgIHJldHVybiBhcnIucHVzaChub2RlLmlkKQogICAgICAgIH0KCiAgICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW09PgogICAgICAgICAgdGhpcy5nZXRMZWFmS2V5cyhpdGVtLGFycikpCiAgICAgIH0sCiAgICAgIC8v55uR5ZCs5YiG6YWN5p2D6ZmQ5a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICAgIHNldFJpZ2h0RGlhbG9nQ2xvc2VkKCl7CiAgICAgICAgdGhpcy5kZWZrZXlzPVtdCiAgICAgIH0sCiAgICAgIC8v54K55Ye756Gu5a6a5Li66KeS6Imy5YiG6YWN5p2D6ZmQIC4uLuWxleW8gOi/kOeul+espgogICAgICBhbGxvdFJpZ2h0cygpewogICAgICAgIGNvbnN0IGtleXM9WwoJCQkvL+iLpeiKgueCueWPr+iiq+mAieaLqe+8iOWNsyBzaG93LWNoZWNrYm94IOS4uiB0cnVl77yJ77yM5YiZ6L+U5Zue55uu5YmN6KKr6YCJ5Lit55qE6IqC54K55omA57uE5oiQ55qE5pWw57uECiAgICAgICAgICAuLi50aGlzLiRyZWZzLnRyZWVSZWYuZ2V0Q2hlY2tlZEtleXMoKSwKCQkgIC8v6Iul6IqC54K55Y+v6KKr6YCJ5oup77yI5Y2zIHNob3ctY2hlY2tib3gg5Li6IHRydWXvvInvvIzliJnov5Tlm57nm67liY3ljYrpgInkuK3nmoToioLngrnnmoQga2V5IOaJgOe7hOaIkOeahOaVsOe7hAogICAgICAgICAgLi4udGhpcy4kcmVmcy50cmVlUmVmLmdldEhhbGZDaGVja2VkS2V5cygpCiAgICAgICAgXQogICAgICAgIGNvbnN0IGlkU3RyPWtleXMuam9pbignLCcpCiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGByb2xlcy8ke3RoaXMucm9sZUlkfS9yaWdodHNgLHsKICAgICAgICAgIHJpZHM6aWRTdHIKICAgICAgICB9KS50aGVuKCh7ZGF0YTpyZXN9KT0+IHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliIbphY3mnYPpmZDlpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIhumFjeadg+mZkOaIkOWKnycpCiAgICAgICAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICAgICAgICAgICAgdGhpcy5zZXRSaWdodERpYWxvZ1Zpc2libGxlPWZhbHNlCiAgICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfQo="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/views/power","sourcesContent":["<template>\r\n<div>\r\n  <!--  面包屑导航区域-->\r\n  <el-breadcrumb separator=\"/\">\r\n    <el-breadcrumb-item :to=\"{ path: '/Welcome' }\">首页</el-breadcrumb-item>\r\n    <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n    <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n  </el-breadcrumb>\r\n\r\n<!--  卡片视图-->\r\n  <el-card>\r\n<!--    添加角色按钮区域-->\r\n    <el-row>\r\n      <el-col>\r\n        <el-button type=\"primary\"  @click=\"addDialogVisible=true\">添加角色</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n<!--    角色列表区域 stripe斑马线-->\r\n    <el-table :data=\"rolelist\" border stripe>\r\n<!--      展开列 expand可展开的-->\r\n      <el-table-column type=\"expand\">\r\n        <template v-slot=\"{row}\">\r\n          <el-row :class=\"['bdbottpm',i1===0?'.bdtop':''  ,'vcenter']\"  v-for=\"(item1,i1) in row.children\" :key=\"item1.id\">\r\n<!--            渲染一级权限 :span=\"5占5列  判断索引值第一个是否为0 是则加上顶边框-->\r\n            <el-col  :span=\"5\">\r\n              <el-tag closable @close=\"removeRightByid(row,item1.id)\">{{item1.authName}}</el-tag>\r\n              <i class=\"el-icon-caret-right\"></i>\r\n            </el-col>\r\n<!--            渲染二级，三级权限-->\r\n            <el-col :span=\"19\">\r\n<!--            通过for循环嵌套渲染二级权限-->\r\n              <el-row :class=\"[i2===0?'':'bdtop','vcenter']\" v-for=\"(item2,i2) in item1.children\" :key=\"item2.id\">\r\n                <el-col :span=\"6\">\r\n                  <el-tag closable @close=\"removeRightByid(row,item2.id)\" type=\"success\">{{item2.authName}}</el-tag>\r\n                  <i class=\"el-icon-caret-right\"></i>\r\n                </el-col>\r\n                <el-col :span=\"18\">\r\n<!--                  @close elementui内部语法-->\r\n                  <el-tag closable @close=\"removeRightByid(row,item3.id)\" type=\"warning\" v-for=\"(item3,i3) in item2.children\" :key=\"item3.id\">{{item3.authName}}</el-tag>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n          </el-row>\r\n        </template>\r\n      </el-table-column>\r\n<!--      索引列-->\r\n      <el-table-column type=\"index\"></el-table-column>\r\n      <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n      <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"300px\">\r\n        <template v-slot=\"{row}\">\r\n          <el-button size=\"mini\" @click=\"showEditDialog(row.id)\" type=\"primary\" icon=\"el-icon-edit\">编辑</el-button>\r\n          <el-button size=\"mini\" @click=\"removeById(row.id)\"   type=\"danger\" icon=\"el-icon-delete\">删除</el-button>\r\n          <el-button @click=\"showSetRightDialog(row)\" size=\"mini\"  type=\"warning\" icon=\"el-icon-setting\">分配权限</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n  </el-card>\r\n\r\n  <!--  添加角色的对话框-->\r\n<!--  :visible.sync控制添加角色对话框的显示和隐藏-->\r\n<el-dialog title=\"添加角色\" :visible.sync=\"addDialogVisible\" width=\"50%\">\r\n    <!--    内容主题区域-->\r\n    <el-form :model=\"addForm\" :rules=\"addRoleRules\"\r\n             ref=\"addRulesRef\" label-width=\"80px\">\r\n      <el-form-item  label=\"角色名称\" prop=\"roleName\">\r\n        <el-input v-model=\"addForm.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n        <el-input v-model=\"addForm.roleDesc\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"addDialogVisible = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"addRules\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n\r\n  <!--  修改用户的对话框-->\r\n<el-dialog title=\"修改角色\" :visible.sync=\"editDialogVisiblle\" width=\"50%\">\r\n    <!--    内容主题区域-->\r\n    <el-form :model=\"editForm\" :rules=\"addRoleRules\"\r\n             ref=\"editFormRef\" label-width=\"80px\">\r\n      <el-form-item  label=\"角色名称\" prop=\"roleName\">\r\n        <el-input v-model=\"editForm.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n        <el-input v-model=\"editForm.roleDesc\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"editDialogVisiblle = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"editUserinfo\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n\r\n  <!--  分配权限的对话框-->\r\n<el-dialog @close=\"setRightDialogClosed\" title=\"分配权限\" :visible.sync=\"setRightDialogVisiblle\" width=\"50%\">\r\n    <!--    树形控件-->\r\n    <el-tree ref=\"treeRef\" :default-checked-keys=\"defkeys\" default-expand-all node-key=\"id\" show-checkbox :data=\"rightsList\" :props=\"treeProps\" ></el-tree>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"editDialogVisiblle = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Roles\",\r\n    data() {\r\n      //验证邮箱校验规则\r\n      let checkEmail=(rule,value,callback)=>{\r\n        const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n        if(regEmail.test(value)){\r\n          //合法的邮箱\r\n          return callback()\r\n        }\r\n        callback(new Error('请输入合法的邮箱'))\r\n      }\r\n      //验证手机号校验规则\r\n      let checkMobile=(rule,value,callback)=>{\r\n        // 验证手机号的正则表达式\r\n        const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n        //如果regMobile的test方法中value经过校验合法的手机号\r\n        if (regMobile.test(value)) {\r\n          //执行callback方法\r\n          return callback()\r\n        }\r\n\r\n        callback(new Error('请输入合法的手机号'))\r\n      }\r\n      return {\r\n        //所有角色列表数据\r\n        rolelist: [],\r\n        //添加角色的表单数据\r\n        addForm: {\r\n          roleId: '',\r\n          roleName: '',\r\n          roleDesc: ''\r\n        },\r\n        //查询到的角色信息对象\r\n        editForm:{},\r\n        //控制添加角色对话框的显示和隐藏\r\n        addDialogVisible: false,\r\n        //控制修改用户对话框的显示和隐藏\r\n        editDialogVisiblle:false,\r\n        //控制分配权限对话框的显示和隐藏\r\n        setRightDialogVisiblle:false,\r\n        //所有权限的数据\r\n        rightsList:[],\r\n        //树形控件的属性绑定对象\r\n        treeProps:{\r\n          //label展示可看到的属性\r\n          label:'authName',\r\n          //父子节点通过children属性实现嵌套\r\n          children:'children'\r\n        },\r\n        //默认选中节点的id值数组\r\n        defkeys:[],\r\n        //当前即将分配权限的角色id\r\n        roleId:'',\r\n        //添加用户表单的规则对象\r\n        addRoleRules: {\r\n          roleName: [\r\n            {required: true, message: '请输入角色名称', trigger: 'blur'},\r\n            {min: 3, max: 10, message: '用户名长度在 3 到 10 个字符之间', trigger: 'blur'}\r\n          ],\r\n\t\t  roleDesc: [\r\n\t\t    {required: true, message: '请输入角色描述', trigger: 'blur'},\r\n\t\t    {min: 3, max: 10, message: '角色描述长度在 3 到 10 个字符之间', trigger: 'blur'}\r\n\t\t  ],\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.getRolesList()\r\n    },\r\n    methods: {\r\n      //获取所有角色的列表\r\n      getRolesList() {\r\n        this.$http.get('roles')\r\n          .then(({data:res}) => {\r\n            // console.log(res.data.data)\r\n            if (res.meta.status !== 200) {\r\n              return this.$message.error('获取角色列表失败');\r\n            }\r\n            this.rolelist = res.data\r\n          })\r\n      },\r\n      //点击按钮，添加角色\r\n      addRules() {\r\n        this.$refs.addRulesRef.validate((valid) => {\r\n          if (!valid) return\r\n          //可以发起添加用户的请求\r\n          this.$http.post('roles', this.addForm).then(({data:res}) => {\r\n              if (res.meta.status !== 201) {\r\n                return this.$message.error('添加用户失败');\r\n              }\r\n              this.$message.success('添加用户成功')\r\n              //隐藏添加用户的对话框\r\n              this.addDialogVisible = false\r\n              //重新获取用户列表\r\n              this.getRolesList()\r\n            })\r\n        })\r\n      },\r\n      //展示编辑角色的对话框\r\n      showEditDialog(id){\r\n        // console.log( id)\r\n        this.$http.get('roles/'+id).then(({data:res})=> {\r\n            // console.log(res.data.data)\r\n            if (res.meta.status !== 200) {\r\n              return this.$message.error('查询用户信息失败');\r\n            }\r\n            this.editForm=res.data\r\n            this.editDialogVisiblle=true\r\n          })\r\n      },\r\n      //修改角色信息并提交\r\n      editUserinfo(){\r\n      //获取表单预校验结果为true提交\r\n        this.$refs.editFormRef.validate(vaild=>{\r\n          if (!vaild) return\r\n          //发起修改用户信息的数据请求\r\n          this.$http.put(`roles/`+this.editForm.roleId,{\r\n            roleName:this.editForm.roleName,\r\n            roleDesc:this.editForm.roleDesc\r\n          }).then(({data:res})=> {\r\n              if (res.meta.status !== 200) {\r\n                return this.$message.error('更新用户信息失败');\r\n              }\r\n              this.$message.success('更新用户信息成功')\r\n              //隐藏添加用户的对话框\r\n              this.editDialogVisiblle=false\r\n              //重新获取用户列表\r\n              this.getRolesList()\r\n            })\r\n        })\r\n      },\r\n      //根据id删除对应的角色信息\r\n      removeById(id){\r\n        //弹框询问是否删除\r\n        this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$http.delete(`roles/`+id)\r\n            .then(res=> {\r\n              if (res.data.meta.status !== 200) {\r\n                return this.$message.error('删除角色失败');\r\n              }\r\n              this.$message.success('删除角色成功')\r\n              //删除成功后刷新数据列表\r\n              this.getRolesList();\r\n            })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      //根据id删除对应的权限\r\n      removeRightByid(role,rightId){\r\n       //弹框提示是否删除\r\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          });\r\n          this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n            .then(({data:res})=> {\r\n              if (res.meta.status !== 200) {\r\n                return this.$message.error('删除角色失败');\r\n              }\r\n              //删除成功后刷新数据列表\r\n              role.children=res.data\r\n            })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      //展示分配权限的对话框\r\n      showSetRightDialog(role){\r\n        //保存选中节点id\r\n        this.roleId=role.id\r\n        //获取所有权限数据\r\n        this.$http.get('rights/tree')\r\n          .then(res=> {\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('获取权限列表失败');\r\n            }\r\n            //把获取到的权限数据保存到data中\r\n            this.rightsList=res.data.data\r\n            // console.log(this.rightsList)\r\n          })\r\n        //递归获取三级节点\r\n        this.getLeafKeys(role,this.defkeys)\r\n        this.setRightDialogVisiblle=true\r\n      },\r\n      //通过递归的形式获取角色下所有三级权限的id\r\n      //并保存到defkeys数组中\r\n      getLeafKeys(node,arr){\r\n      //如果当前node节点不包含children属性\r\n      //则是三级节点\r\n        if(!node.children){\r\n          return arr.push(node.id)\r\n        }\r\n\r\n        node.children.forEach(item=>\r\n          this.getLeafKeys(item,arr))\r\n      },\r\n      //监听分配权限对话框的关闭事件\r\n      setRightDialogClosed(){\r\n        this.defkeys=[]\r\n      },\r\n      //点击确定为角色分配权限 ...展开运算符\r\n      allotRights(){\r\n        const keys=[\r\n\t\t\t//若节点可被选择（即 show-checkbox 为 true），则返回目前被选中的节点所组成的数组\r\n          ...this.$refs.treeRef.getCheckedKeys(),\r\n\t\t  //若节点可被选择（即 show-checkbox 为 true），则返回目前半选中的节点的 key 所组成的数组\r\n          ...this.$refs.treeRef.getHalfCheckedKeys()\r\n        ]\r\n        const idStr=keys.join(',')\r\n        this.$http.post(`roles/${this.roleId}/rights`,{\r\n          rids:idStr\r\n        }).then(({data:res})=> {\r\n            // console.log(res)\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('分配权限失败');\r\n            }\r\n            this.$message.success('分配权限成功')\r\n            this.getRolesList()\r\n            this.setRightDialogVisiblle=false\r\n          })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.el-tag{\r\n  margin: 7px;\r\n}\r\n.bdtop{\r\n  border-top: 1px solid #eee;\r\n}\r\n.bdbottpm{\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.vcenter{\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>"]}]}