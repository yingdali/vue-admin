{"remainingRequest":"G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\webstore\\vue-admin\\src\\views\\Users\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstore\\vue-admin\\src\\views\\Users\\Users.vue","mtime":1630038768157},{"path":"G:\\webstore\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlcnMiLAogIGRhdGEoKXsKICAgIC8v6aqM6K+B6YKu566x5qCh6aqM6KeE5YiZCiAgICBsZXQgY2hlY2tFbWFpbD0ocnVsZSx2YWx1ZSxjYWxsYmFjayk9PnsKICAgICAgY29uc3QgcmVnRW1haWwgPSAvXihbYS16QS1aMC05Xy1dKStAKFthLXpBLVowLTlfLV0pKyhcLlthLXpBLVowLTlfLV0pKy8KICAgICAgaWYocmVnRW1haWwudGVzdCh2YWx1ZSkpewogICAgICAgIC8v5ZCI5rOV55qE6YKu566xCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCkKICAgICAgfQogICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWQiOazleeahOmCrueusScpKQogICAgfQogICAgLy/pqozor4HmiYvmnLrlj7fmoKHpqozop4TliJkKICAgIGxldCBjaGVja01vYmlsZT0ocnVsZSx2YWx1ZSxjYWxsYmFjayk9PnsKICAgICAgLy8g6aqM6K+B5omL5py65Y+355qE5q2j5YiZ6KGo6L6+5byPCiAgICAgIGNvbnN0IHJlZ01vYmlsZSA9IC9eKDB8ODZ8MTc5NTEpPygxM1swLTldfDE1WzAxMjM1Njc4OV18MTdbNjc4XXwxOFswLTldfDE0WzU3XSlbMC05XXs4fSQvCiAgICAgIC8v5aaC5p6ccmVnTW9iaWxl55qEdGVzdOaWueazleS4rXZhbHVl57uP6L+H5qCh6aqM5ZCI5rOV55qE5omL5py65Y+3CiAgICAgIGlmIChyZWdNb2JpbGUudGVzdCh2YWx1ZSkpIHsKICAgICAgICAvL+aJp+ihjGNhbGxiYWNr5pa55rOVCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCkKICAgICAgfQoKICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTmiYvmnLrlj7cnKSkKCiAgICB9CgogICAgcmV0dXJuewogICAgLy/ojrflj5bnlKjmiLfliJfooajnmoTlj4LmlbDlr7nosaEKICAgICAgcXVlcnRJbmZvOnsKICAgICAgICBxdWVyeTonJywKICAgICAgICAvL+W9k+WJjeeahOmhteaVsAogICAgICAgIHBhZ2VudW06MSwKICAgICAgICAvL+W9k+WJjeavj+mhteaYvuekuuWkmuWwkeadoeaVsOaNrgogICAgICAgIHBhZ2VzaXplOjIKICAgICAgfSwKICAgICAgdXNlcmxpc3Q6W10sCiAgICAgIHRvdGFsOjAsCiAgICAgIC8v5o6n5Yi25re75Yqg55So5oi35a+56K+d5qGG55qE5pi+56S65ZKM6ZqQ6JePCiAgICAgIGFkZERpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgIC8v5o6n5Yi25L+u5pS555So5oi35a+56K+d5qGG55qE5pi+56S65ZKM6ZqQ6JePCiAgICAgIGVkaXREaWFsb2dWaXNpYmxsZTpmYWxzZSwKICAgICAgLy/mn6Xor6LliLDnmoTnlKjmiLfkv6Hmga/lr7nosaEKICAgICAgZWRpdEZvcm06e30sCiAgICAgIC8v5re75Yqg55So5oi355qE6KGo5Y2V5pWw5o2uCiAgICAgIGFkZEZvcm06ewogICAgICAgIHVzZXJuYW1lOicnLAogICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgIGVtYWlsOicnLAogICAgICAgIG1vYmlsZTonJwogICAgICB9LAogICAgICAvL+a3u+WKoOeUqOaIt+ihqOWNleeahOinhOWImeWvueixoQogICAgICBhZGRGb3JtUnVsZXM6ewogICAgICAgIHVzZXJuYW1lOlsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJ30sCiAgICAgICAgICB7bWluOiAzLCBtYXg6IDEwLCBtZXNzYWdlOiAn55So5oi35ZCN6ZW/5bqm5ZyoIDMg5YiwIDEwIOS4quWtl+espuS5i+mXtCcsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOlsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJ30sCiAgICAgICAgICB7bWluOiA2LCBtYXg6IDE1LCBtZXNzYWdlOiAn5a+G56CB6ZW/5bqm5ZyoIDbliLAgMTXkuKrlrZfnrKbkuYvpl7QnLCB0cmlnZ2VyOiAnYmx1cid9CiAgICAgICAgXSwKICAgICAgICBlbWFpbDpbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpgq7nrrEnLCB0cmlnZ2VyOiAnYmx1cid9LAogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrRW1haWwsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBtb2JpbGU6WwogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5omL5py65Y+3JywgdHJpZ2dlcjogJ2JsdXInfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja01vYmlsZSwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0sCgogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckxpc3QoKQogIH0sCiAgbWV0aG9kczp7CiAgICBnZXRVc2VyTGlzdCgpewogICAgICB0aGlzLiRodHRwLmdldCgndXNlcnMnLHtwYXJhbXM6dGhpcy5xdWVydEluZm99KQogICAgICAgIC50aGVuKHJlcz0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzIT09MjAwKXsKICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tZXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVzZXJsaXN0PXJlcy5kYXRhLmRhdGEudXNlcnMKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudXNlcmxpc3QpOwogICAgICAgICAgdGhpcy50b3RhbD1yZXMuZGF0YS5kYXRhLnRvdGFsCgogICAgICAgIH0pCiAgICB9LAogICAgLy/nm5HlkKxwYWdlc2l6ZeaUueWPmOeahOS6i+S7tgogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKXsKICAgICAgLy8gY29uc29sZS5sb2cobmV3U2l6ZSkKICAgICAgdGhpcy5xdWVydEluZm8ucGFnZXNpemU9bmV3U2l6ZQogICAgICAvL+mHjeaWsOiOt+WPluaVsOaNrgogICAgICB0aGlzLmdldFVzZXJMaXN0KCkKICAgIH0sCiAgICAvL+ebkeWQrOmhteeggeWAvOaUueWPmOeahOS6i+S7tgogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdwYWdlKXsKICAgICAgY29uc29sZS5sb2cobmV3cGFnZSkKICAgICAgdGhpcy5xdWVydEluZm8ucGFnZW51bT1uZXdwYWdlCiAgICAgIC8v6YeN5paw6I635Y+W5pWw5o2uCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQogICAgfSwKICAgIC8v55uR5ZCsc3dpdGNo5byA5YWz54q25oCB55qE5LqL5Lu2CiAgICB1c2VyU3RhdGVDaGFuZ2VkKHVzZXJpbmZvKXsKICAgICAgdGhpcy4kaHR0cC5wdXQoYHVzZXJzLyR7dXNlcmluZm8uaWR9L3N0YXRlLyR7dXNlcmluZm8ubWdfc3RhdGV9YCkKICAgICAgICAudGhlbihyZXM9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICB1c2VyaW5mby5tZ19zdGF0ZSE9dXNlcmluZm8ubWdfc3RhdGUKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+abtOaWsOeUqOaIt+eKtuaAgeWksei0pScpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDnlKjmiLfnirbmgIHmiJDlip8nKQogICAgICAgIH0pCiAgICAgICAgfSwKICAgIC8v54K55Ye75a+56K+d5qGG6YeM55qE6YeN572u5oyJ6ZKu6YeN572u6KGo5Y2VCiAgICByZXNldGZvcm0oKXsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvL+eCueWHu+aMiemSru+8jOa3u+WKoOeUqOaItwogICAgYWRkVXNlcigpewogICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYudmFsaWRhdGUoKHZhbGlkKT0+ewogICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbGlkKQogICAgICAgIGlmICghdmFsaWQpIHJldHVybgogICAgICAgIC8v5Y+v5Lul5Y+R6LW35re75Yqg55So5oi355qE6K+35rGCCgogICAgICAgIHRoaXMuJGh0dHAucG9zdCgndXNlcnMnLHRoaXMuYWRkRm9ybSkKICAgICAgICAgIC50aGVuKHJlcz0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hZGRGb3JtKQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOeUqOaIt+Wksei0pScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDnlKjmiLfmiJDlip8nKQogICAgICAgICAgICAgIC8v6ZqQ6JeP5re75Yqg55So5oi355qE5a+56K+d5qGGCiAgICAgICAgICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlPWZhbHNlCiAgICAgICAgICAgICAgLy/ph43mlrDojrflj5bnlKjmiLfliJfooagKICAgICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCkKCgogICAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvL+Wxleekuue8lui+keeUqOaIt+eahOWvueivneahhgogICAgc2hvd0VkaXREaWFsb2coaWQpewogICAgICAgIGNvbnNvbGUubG9nKCBpZCkKICAgICAgdGhpcy4kaHR0cC5nZXQoJ3VzZXJzLycraWQpCiAgICAgICAgLnRoZW4ocmVzPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSkKICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LnlKjmiLfkv6Hmga/lpLHotKUnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZWRpdEZvcm09cmVzLmRhdGEuZGF0YQogICAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsbGU9dHJ1ZQogICAgICAgIH0pCiAgICB9LAogICAgLy/moLnmja5pZOWIoOmZpOWvueW6lOeahOeUqOaIt+S/oeaBrwogICAgcmVtb3ZlQnlJZChpZCl7CiAgICAgIC8v5by55qGG6K+i6Zeu5piv5ZCm5Yig6ZmkCiAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l55So5oi3LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRodHRwLmRlbGV0ZShgdXNlcnMvYCtpZCkKICAgICAgICAgICAgLnRoZW4ocmVzPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOeUqOaIt+Wksei0pScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOeUqOaIt+aIkOWKnycpCiAgICAgICAgICAgICAgLy/liKDpmaTmiJDlip/lkI7liLfmlrDmlbDmja7liJfooagKICAgICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views/Users","sourcesContent":["<template>\r\n<div>\r\n<!--  面包屑导航区域-->\r\n  <el-breadcrumb separator=\"/\">\r\n    <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n    <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n    <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n  </el-breadcrumb>\r\n<!--  卡片视图区-->\r\n  <el-card >\r\n<!--    添加与搜索区域-->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"10\">\r\n        <!--   搜索与添加区域-->\r\n        <el-input placeholder=\"请输入内容\"  v-model=\"quertInfo.query\" clearable @clear=\"getUserList\">\r\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n        </el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-button type=\"primary\" @click=\"addDialogVisible=true\">添加用户</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n<!--    用户列表区域-->\r\n      <el-table :data=\"userlist\"\r\n              stripe\r\n              style=\"width: 100%\" border>\r\n        <el-table-column label=\"序号\" type=\"index\" width=\"60px\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\" ></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\" ></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\" ></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\" ></el-table-column>\r\n        <el-table-column prop=\"mg_state\" label=\"状态\" >\r\n          <template v-slot:default=\"{row}\">\r\n<!--            {{ row.mg_state}} ！！！重要的用法-->\r\n            <el-switch v-model=\"row.mg_state\" active-color=\"#13ce66\"\r\n                    inactive-color=\"#ff4949\" @change=\"userStateChanged(row)\">\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column  label=\"操作\" width=\"180px\">\r\n          <template v-slot:default=\"{row}\">\r\n<!--          修改-->\r\n          <el-button @click=\"showEditDialog(row.id)\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"></el-button>\r\n<!--          删除-->\r\n          <el-button @click=\"removeById(row.id)\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\"></el-button>\r\n<!--          分配角色 加入了文字提示-->\r\n          <el-tooltip  effect=\"dark\" content=\"分配角色\" placement=\"top\" :enterable=\"false\">\r\n            <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" ></el-button>\r\n          </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n<!--    分页区域-->\r\n    <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"quertInfo.pagenum\"\r\n            :page-sizes=\"[1, 2, 5, 10]\"\r\n            :page-size=\"quertInfo.pagesize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n    </el-pagination>\r\n  </el-card>\r\n\r\n<!--  添加用户的对话框-->\r\n  <el-dialog\r\n          title=\"添加用户\"\r\n          :visible.sync=\"addDialogVisible\"\r\n          width=\"50%\">\r\n<!--    内容主题区域-->\r\n    <el-form :model=\"addForm\" :rules=\"addFormRules\"\r\n       ref=\"addFormRef\" label-width=\"70px\">\r\n      <el-form-item label=\"用户名\" prop=\"username\">\r\n        <el-input v-model=\"addForm.username\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" prop=\"password\">\r\n        <el-input v-model=\"addForm.password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"addForm.email\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机\" prop=\"mobile\">\r\n        <el-input v-model=\"addForm.mobile\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n<!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"resetform\">重置</el-button>\r\n    <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n\r\n<!--  修改用户的对话框-->\r\n  <el-dialog\r\n          title=\"修改用户\"\r\n          :visible.sync=\"editDialogVisiblle\"\r\n          width=\"50%\">\r\n    <!--    内容主题区域-->\r\n    <el-form :model=\"editForm\" :rules=\"addFormRules\"\r\n             ref=\"editFormRef\" label-width=\"70px\">\r\n      <el-form-item label=\"用户名\" disabled>\r\n        <el-input v-model=\"editForm.username\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"editForm.email\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机\" prop=\"mobile\">\r\n        <el-input v-model=\"editForm.mobile\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"resetform\">重置</el-button>\r\n    <el-button type=\"primary\" @click=\"editDialogVisiblle\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Users\",\r\n    data(){\r\n      //验证邮箱校验规则\r\n      let checkEmail=(rule,value,callback)=>{\r\n        const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n        if(regEmail.test(value)){\r\n          //合法的邮箱\r\n          return callback()\r\n        }\r\n        callback(new Error('请输入合法的邮箱'))\r\n      }\r\n      //验证手机号校验规则\r\n      let checkMobile=(rule,value,callback)=>{\r\n        // 验证手机号的正则表达式\r\n        const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n        //如果regMobile的test方法中value经过校验合法的手机号\r\n        if (regMobile.test(value)) {\r\n          //执行callback方法\r\n          return callback()\r\n        }\r\n\r\n        callback(new Error('请输入合法的手机号'))\r\n\r\n      }\r\n\r\n      return{\r\n      //获取用户列表的参数对象\r\n        quertInfo:{\r\n          query:'',\r\n          //当前的页数\r\n          pagenum:1,\r\n          //当前每页显示多少条数据\r\n          pagesize:2\r\n        },\r\n        userlist:[],\r\n        total:0,\r\n        //控制添加用户对话框的显示和隐藏\r\n        addDialogVisible:false,\r\n        //控制修改用户对话框的显示和隐藏\r\n        editDialogVisiblle:false,\r\n        //查询到的用户信息对象\r\n        editForm:{},\r\n        //添加用户的表单数据\r\n        addForm:{\r\n          username:'',\r\n          password:'',\r\n          email:'',\r\n          mobile:''\r\n        },\r\n        //添加用户表单的规则对象\r\n        addFormRules:{\r\n          username:[\r\n            {required: true, message: '请输入用户名', trigger: 'blur'},\r\n            {min: 3, max: 10, message: '用户名长度在 3 到 10 个字符之间', trigger: 'blur'}\r\n          ],\r\n          password:[\r\n            {required: true, message: '请输入密码', trigger: 'blur'},\r\n            {min: 6, max: 15, message: '密码长度在 6到 15个字符之间', trigger: 'blur'}\r\n          ],\r\n          email:[\r\n            {required: true, message: '请输入邮箱', trigger: 'blur'},\r\n            { validator: checkEmail, trigger: 'blur' }\r\n          ],\r\n          mobile:[\r\n            {required: true, message: '请输入手机号', trigger: 'blur'},\r\n            { validator: checkMobile, trigger: 'blur' }\r\n          ]\r\n        },\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.getUserList()\r\n    },\r\n    methods:{\r\n      getUserList(){\r\n        this.$http.get('users',{params:this.quertInfo})\r\n          .then(res=> {\r\n            if (res.status!==200){\r\n             return this.$message.error(res.data.meta.msg);\r\n            }\r\n            this.userlist=res.data.data.users\r\n            // console.log(this.userlist);\r\n            this.total=res.data.data.total\r\n\r\n          })\r\n      },\r\n      //监听pagesize改变的事件\r\n      handleSizeChange(newSize){\r\n        // console.log(newSize)\r\n        this.quertInfo.pagesize=newSize\r\n        //重新获取数据\r\n        this.getUserList()\r\n      },\r\n      //监听页码值改变的事件\r\n      handleCurrentChange(newpage){\r\n        console.log(newpage)\r\n        this.quertInfo.pagenum=newpage\r\n        //重新获取数据\r\n        this.getUserList()\r\n      },\r\n      //监听switch开关状态的事件\r\n      userStateChanged(userinfo){\r\n        this.$http.put(`users/${userinfo.id}/state/${userinfo.mg_state}`)\r\n          .then(res=> {\r\n            if (res.data.meta.status !== 200) {\r\n              userinfo.mg_state!=userinfo.mg_state\r\n              return this.$message.error('更新用户状态失败');\r\n            }\r\n            this.$message.success('更新用户状态成功')\r\n          })\r\n          },\r\n      //点击对话框里的重置按钮重置表单\r\n      resetform(){\r\n        this.$refs.addFormRef.resetFields()\r\n      },\r\n      //点击按钮，添加用户\r\n      addUser(){\r\n        this.$refs.addFormRef.validate((valid)=>{\r\n          // console.log(valid)\r\n          if (!valid) return\r\n          //可以发起添加用户的请求\r\n\r\n          this.$http.post('users',this.addForm)\r\n            .then(res=> {\r\n              console.log(this.addForm)\r\n              console.log(res)\r\n              if (res.data.meta.status !== 201) {\r\n                return this.$message.error('添加用户失败');\r\n              }\r\n                this.$message.success('添加用户成功')\r\n                //隐藏添加用户的对话框\r\n                this.addDialogVisible=false\r\n                //重新获取用户列表\r\n                this.getUserList()\r\n\r\n\r\n            })\r\n        })\r\n      },\r\n      //展示编辑用户的对话框\r\n      showEditDialog(id){\r\n          console.log( id)\r\n        this.$http.get('users/'+id)\r\n          .then(res=> {\r\n            console.log(res.data.data)\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('查询用户信息失败');\r\n            }\r\n            this.editForm=res.data.data\r\n            this.editDialogVisiblle=true\r\n          })\r\n      },\r\n      //根据id删除对应的用户信息\r\n      removeById(id){\r\n        //弹框询问是否删除\r\n          this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            this.$http.delete(`users/`+id)\r\n              .then(res=> {\r\n                console.log(res)\r\n                if (res.data.meta.status !== 200) {\r\n                  return this.$message.error('删除用户失败');\r\n                }\r\n                this.$message.success('删除用户成功')\r\n                //删除成功后刷新数据列表\r\n                this.getUserList();\r\n              })\r\n          }).catch(() => {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '已取消删除'\r\n            });\r\n          });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}