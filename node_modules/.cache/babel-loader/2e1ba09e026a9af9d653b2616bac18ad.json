{"remainingRequest":"G:\\webstore\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\webstore\\vue-admin\\src\\views\\power\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\webstore\\vue-admin\\src\\views\\power\\Roles.vue","mtime":1630833568030},{"path":"G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstore\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\webstore\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\webstore\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJHOi93ZWJzdG9yZS92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJvbGVzIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgLy/pqozor4Hpgq7nrrHmoKHpqozop4TliJkKICAgIHZhciBjaGVja0VtYWlsID0gZnVuY3Rpb24gY2hlY2tFbWFpbChydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIHJlZ0VtYWlsID0gL14oW2EtekEtWjAtOV8tXSkrQChbYS16QS1aMC05Xy1dKSsoXC5bYS16QS1aMC05Xy1dKSsvOwoKICAgICAgaWYgKHJlZ0VtYWlsLnRlc3QodmFsdWUpKSB7CiAgICAgICAgLy/lkIjms5XnmoTpgq7nrrEKICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgICAgfQoKICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTpgq7nrrEnKSk7CiAgICB9OyAvL+mqjOivgeaJi+acuuWPt+agoemqjOinhOWImQoKCiAgICB2YXIgY2hlY2tNb2JpbGUgPSBmdW5jdGlvbiBjaGVja01vYmlsZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgLy8g6aqM6K+B5omL5py65Y+355qE5q2j5YiZ6KGo6L6+5byPCiAgICAgIHZhciByZWdNb2JpbGUgPSAvXigwfDg2fDE3OTUxKT8oMTNbMC05XXwxNVswMTIzNTY3ODldfDE3WzY3OF18MThbMC05XXwxNFs1N10pWzAtOV17OH0kLzsgLy/lpoLmnpxyZWdNb2JpbGXnmoR0ZXN05pa55rOV5LitdmFsdWXnu4/ov4fmoKHpqozlkIjms5XnmoTmiYvmnLrlj7cKCiAgICAgIGlmIChyZWdNb2JpbGUudGVzdCh2YWx1ZSkpIHsKICAgICAgICAvL+aJp+ihjGNhbGxiYWNr5pa55rOVCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICAgIH0KCiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5ZCI5rOV55qE5omL5py65Y+3JykpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICAvL+aJgOacieinkuiJsuWIl+ihqOaVsOaNrgogICAgICByb2xlbGlzdDogW10sCiAgICAgIC8v5re75Yqg6KeS6Imy55qE6KGo5Y2V5pWw5o2uCiAgICAgIGFkZEZvcm06IHsKICAgICAgICByb2xlSWQ6ICcnLAogICAgICAgIHJvbGVOYW1lOiAnJywKICAgICAgICByb2xlRGVzYzogJycKICAgICAgfSwKICAgICAgLy/mn6Xor6LliLDnmoTop5LoibLkv6Hmga/lr7nosaEKICAgICAgZWRpdEZvcm06IHt9LAogICAgICAvL+aOp+WItua3u+WKoOinkuiJsuWvueivneahhueahOaYvuekuuWSjOmakOiXjwogICAgICBhZGREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy/mjqfliLbkv67mlLnnlKjmiLflr7nor53moYbnmoTmmL7npLrlkozpmpDol48KICAgICAgZWRpdERpYWxvZ1Zpc2libGxlOiBmYWxzZSwKICAgICAgLy/mjqfliLbliIbphY3mnYPpmZDlr7nor53moYbnmoTmmL7npLrlkozpmpDol48KICAgICAgc2V0UmlnaHREaWFsb2dWaXNpYmxsZTogZmFsc2UsCiAgICAgIC8v5omA5pyJ5p2D6ZmQ55qE5pWw5o2uCiAgICAgIHJpZ2h0c0xpc3Q6IFtdLAogICAgICAvL+agkeW9ouaOp+S7tueahOWxnuaAp+e7keWumuWvueixoQogICAgICB0cmVlUHJvcHM6IHsKICAgICAgICAvL2xhYmVs5bGV56S65Y+v55yL5Yiw55qE5bGe5oCnCiAgICAgICAgbGFiZWw6ICdhdXRoTmFtZScsCiAgICAgICAgLy/niLblrZDoioLngrnpgJrov4djaGlsZHJlbuWxnuaAp+WunueOsOW1jOWllwogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nCiAgICAgIH0sCiAgICAgIC8v6buY6K6k6YCJ5Lit6IqC54K555qEaWTlgLzmlbDnu4QKICAgICAgZGVma2V5czogW10sCiAgICAgIC8v5b2T5YmN5Y2z5bCG5YiG6YWN5p2D6ZmQ55qE6KeS6ImyaWQKICAgICAgcm9sZUlkOiAnJywKICAgICAgLy/mt7vliqDnlKjmiLfooajljZXnmoTop4TliJnlr7nosaEKICAgICAgYWRkUnVsZXNSdWxlczogewogICAgICAgIHJvbGVOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMywKICAgICAgICAgIG1heDogMTAsCiAgICAgICAgICBtZXNzYWdlOiAn55So5oi35ZCN6ZW/5bqm5ZyoIDMg5YiwIDEwIOS4quWtl+espuS5i+mXtCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluaJgOacieinkuiJsueahOWIl+ihqAogICAgZ2V0Um9sZXNMaXN0OiBmdW5jdGlvbiBnZXRSb2xlc0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRodHRwLmdldCgncm9sZXMnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluinkuiJsuWIl+ihqOWksei0pScpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMucm9sZWxpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvL+eCueWHu+aMiemSru+8jOa3u+WKoOinkuiJsgogICAgYWRkUnVsZXM6IGZ1bmN0aW9uIGFkZFJ1bGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuYWRkUnVsZXNSZWYudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codmFsaWQpCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOyAvL+WPr+S7peWPkei1t+a3u+WKoOeUqOaIt+eahOivt+axggoKICAgICAgICBfdGhpczIuJGh0dHAucG9zdCgncm9sZXMnLCBfdGhpczIuYWRkRm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmFkZFJ1bGVzKQogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRtZXNzYWdlLmVycm9yKCfmt7vliqDnlKjmiLflpLHotKUnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg55So5oi35oiQ5YqfJyk7IC8v6ZqQ6JeP5re75Yqg55So5oi355qE5a+56K+d5qGGCgoKICAgICAgICAgIF90aGlzMi5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2U7IC8v6YeN5paw6I635Y+W55So5oi35YiX6KGoCgogICAgICAgICAgX3RoaXMyLmdldFJvbGVzTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+Wxleekuue8lui+keinkuiJsueahOWvueivneahhgogICAgc2hvd0VkaXREaWFsb2c6IGZ1bmN0aW9uIHNob3dFZGl0RGlhbG9nKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coIGlkKQogICAgICB0aGlzLiRodHRwLmdldCgncm9sZXMvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LnlKjmiLfkv6Hmga/lpLHotKUnKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMy5lZGl0Rm9ybSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXMzLmVkaXREaWFsb2dWaXNpYmxsZSA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5L+u5pS56KeS6Imy5L+h5oGv5bm25o+Q5LqkCiAgICBlZGl0VXNlcmluZm86IGZ1bmN0aW9uIGVkaXRVc2VyaW5mbygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvL+iOt+WPluihqOWNlemihOagoemqjOe7k+aenOS4unRydWXmj5DkuqQKICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi52YWxpZGF0ZShmdW5jdGlvbiAodmFpbGQpIHsKICAgICAgICBpZiAoIXZhaWxkKSByZXR1cm47IC8v5Y+R6LW35L+u5pS555So5oi35L+h5oGv55qE5pWw5o2u6K+35rGCCgogICAgICAgIF90aGlzNC4kaHR0cC5wdXQoInJvbGVzLyIgKyBfdGhpczQuZWRpdEZvcm0ucm9sZUlkLCB7CiAgICAgICAgICByb2xlTmFtZTogX3RoaXM0LmVkaXRGb3JtLnJvbGVOYW1lLAogICAgICAgICAgcm9sZURlc2M6IF90aGlzNC5lZGl0Rm9ybS5yb2xlRGVzYwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kbWVzc2FnZS5lcnJvcign5pu05paw55So5oi35L+h5oGv5aSx6LSlJyk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaWsOeUqOaIt+S/oeaBr+aIkOWKnycpOyAvL+makOiXj+a3u+WKoOeUqOaIt+eahOWvueivneahhgoKCiAgICAgICAgICBfdGhpczQuZWRpdERpYWxvZ1Zpc2libGxlID0gZmFsc2U7IC8v6YeN5paw6I635Y+W55So5oi35YiX6KGoCgogICAgICAgICAgX3RoaXM0LmdldFJvbGVzTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE6KeS6Imy5L+h5oGvCiAgICByZW1vdmVCeUlkOiBmdW5jdGlvbiByZW1vdmVCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy/lvLnmoYbor6Lpl67mmK/lkKbliKDpmaQKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l55So5oi3LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kaHR0cC5kZWxldGUoInJvbGVzLyIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM1LiRtZXNzYWdlLmVycm9yKCfliKDpmaTop5LoibLlpLHotKUnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6KeS6Imy5oiQ5YqfJyk7IC8v5Yig6Zmk5oiQ5Yqf5ZCO5Yi35paw5pWw5o2u5YiX6KGoCgoKICAgICAgICAgIF90aGlzNS5nZXRSb2xlc0xpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE5p2D6ZmQCiAgICByZW1vdmVSaWdodEJ5aWQ6IGZ1bmN0aW9uIHJlbW92ZVJpZ2h0QnlpZChyb2xlLCByaWdodElkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgLy/lvLnmoYbmj5DnpLrmmK/lkKbliKDpmaQKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXM2LiRodHRwLmRlbGV0ZSgicm9sZXMvIi5jb25jYXQocm9sZS5pZCwgIi9yaWdodHMvIikuY29uY2F0KHJpZ2h0SWQpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgLy8gY29uc29sZS5sb2cocm9sZS5jaGlsZHJlbikKICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczYuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOinkuiJsuWksei0pScpOwogICAgICAgICAgfSAvL+WIoOmZpOaIkOWKn+WQjuWIt+aWsOaVsOaNruWIl+ihqAoKCiAgICAgICAgICByb2xlLmNoaWxkcmVuID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WxleekuuWIhumFjeadg+mZkOeahOWvueivneahhgogICAgc2hvd1NldFJpZ2h0RGlhbG9nOiBmdW5jdGlvbiBzaG93U2V0UmlnaHREaWFsb2cocm9sZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIC8v5L+d5a2Y6YCJ5Lit6IqC54K5aWQKICAgICAgdGhpcy5yb2xlSWQgPSByb2xlLmlkOyAvL+iOt+WPluaJgOacieadg+mZkOaVsOaNrgoKICAgICAgdGhpcy4kaHR0cC5nZXQoJ3JpZ2h0cy90cmVlJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIHJldHVybiBfdGhpczcuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluadg+mZkOWIl+ihqOWksei0pScpOwogICAgICAgIH0gLy/miorojrflj5bliLDnmoTmnYPpmZDmlbDmja7kv53lrZjliLBkYXRh5LitCgoKICAgICAgICBfdGhpczcucmlnaHRzTGlzdCA9IHJlcy5kYXRhLmRhdGE7IC8vIGNvbnNvbGUubG9nKHRoaXMucmlnaHRzTGlzdCkKICAgICAgfSk7IC8v6YCS5b2S6I635Y+W5LiJ57qn6IqC54K5CgogICAgICB0aGlzLmdldExlYWZLZXlzKHJvbGUsIHRoaXMuZGVma2V5cyk7CiAgICAgIHRoaXMuc2V0UmlnaHREaWFsb2dWaXNpYmxsZSA9IHRydWU7CiAgICB9LAogICAgLy/pgJrov4fpgJLlvZLnmoTlvaLlvI/ojrflj5bop5LoibLkuIvmiYDmnInkuInnuqfmnYPpmZDnmoRpZAogICAgLy/lubbkv53lrZjliLBkZWZrZXlz5pWw57uE5LitCiAgICBnZXRMZWFmS2V5czogZnVuY3Rpb24gZ2V0TGVhZktleXMobm9kZSwgYXJyKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgLy/lpoLmnpzlvZPliY1ub2Rl6IqC54K55LiN5YyF5ZCrY2hpbGRyZW7lsZ7mgKcKICAgICAgLy/liJnmmK/kuInnuqfoioLngrkKICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgcmV0dXJuIGFyci5wdXNoKG5vZGUuaWQpOwogICAgICB9CgogICAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXM4LmdldExlYWZLZXlzKGl0ZW0sIGFycik7CiAgICAgIH0pOwogICAgfSwKICAgIC8v55uR5ZCs5YiG6YWN5p2D6ZmQ5a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICBzZXRSaWdodERpYWxvZ0Nsb3NlZDogZnVuY3Rpb24gc2V0UmlnaHREaWFsb2dDbG9zZWQoKSB7CiAgICAgIHRoaXMuZGVma2V5cyA9IFtdOwogICAgfSwKICAgIC8v54K55Ye756Gu5a6a5Li66KeS6Imy5YiG6YWN5p2D6ZmQIC4uLuWxleW8gOi/kOeul+espgogICAgYWxsb3RSaWdodHM6IGZ1bmN0aW9uIGFsbG90UmlnaHRzKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBrZXlzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLiRyZWZzLnRyZWVSZWYuZ2V0Q2hlY2tlZEtleXMoKSksIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLiRyZWZzLnRyZWVSZWYuZ2V0SGFsZkNoZWNrZWRLZXlzKCkpKTsKICAgICAgdmFyIGlkU3RyID0ga2V5cy5qb2luKCcsJyk7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgicm9sZXMvIi5jb25jYXQodGhpcy5yb2xlSWQsICIvcmlnaHRzIiksIHsKICAgICAgICByaWRzOiBpZFN0cgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJG1lc3NhZ2UuZXJyb3IoJ+WIhumFjeadg+mZkOWksei0pScpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM5LiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIhumFjeadg+mZkOaIkOWKnycpOwoKICAgICAgICBfdGhpczkuZ2V0Um9sZXNMaXN0KCk7CgogICAgICAgIF90aGlzOS5zZXRSaWdodERpYWxvZ1Zpc2libGxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div>\r\n  <!--  面包屑导航区域-->\r\n  <el-breadcrumb separator=\"/\">\r\n    <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n    <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n    <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n  </el-breadcrumb>\r\n\r\n<!--  卡片视图-->\r\n  <el-card>\r\n<!--    添加角色按钮区域-->\r\n    <el-row>\r\n      <el-col>\r\n        <el-button type=\"primary\"  @click=\"addDialogVisible=true\">添加角色</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n<!--    角色列表区域-->\r\n    <el-table :data=\"rolelist\" border stripe>\r\n<!--      展开列-->\r\n      <el-table-column type=\"expand\">\r\n        <template v-slot:default=\"{row}\">\r\n          <el-row :class=\"['bdbottpm',i1===0?'.bdtop':''  ,'vcenter']\"  v-for=\"(item1,i1) in row.children\" :key=\"item1.id\">\r\n<!--            渲染一级权限 :span=\"5占5列  判断索引值第一个是否为0 是则加上顶边框-->\r\n            <el-col  :span=\"5\">\r\n              <el-tag closable @close=\"removeRightByid(row,item1.id)\">{{item1.authName}}</el-tag>\r\n              <i class=\"el-icon-caret-right\"></i>\r\n            </el-col>\r\n<!--            渲染二级，三级权限-->\r\n            <el-col :span=\"19\">\r\n<!--            通过for循环嵌套渲染二级权限-->\r\n              <el-row :class=\"[i2===0?'':'bdtop','vcenter']\" v-for=\"(item2,i2) in item1.children\" :key=\"item2.id\">\r\n                <el-col :span=\"6\">\r\n                  <el-tag closable @close=\"removeRightByid(row,item2.id)\" type=\"success\">{{item2.authName}}</el-tag>\r\n                  <i class=\"el-icon-caret-right\"></i>\r\n                </el-col>\r\n                <el-col :span=\"18\">\r\n<!--                  @close elementui内部语法-->\r\n                  <el-tag closable @close=\"removeRightByid(row,item3.id)\" type=\"warning\" v-for=\"(item3,i3) in item2.children\" :key=\"item3.id\">{{item3.authName}}</el-tag>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n          </el-row>\r\n        </template>\r\n      </el-table-column>\r\n<!--      索引列-->\r\n      <el-table-column type=\"index\"></el-table-column>\r\n      <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n      <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"300px\">\r\n        <template v-slot:default=\"{row}\">\r\n          <el-button size=\"mini\" @click=\"showEditDialog(row.id)\" type=\"primary\" icon=\"el-icon-edit\">编辑</el-button>\r\n          <el-button size=\"mini\" @click=\"removeById(row.id)\"   type=\"danger\" icon=\"el-icon-delete\">删除</el-button>\r\n          <el-button @click=\"showSetRightDialog(row)\" size=\"mini\"  type=\"warning\" icon=\"el-icon-setting\">分配权限</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n  </el-card>\r\n\r\n  <!--  添加角色的对话框-->\r\n<!--  :visible.sync控制添加角色对话框的显示和隐藏-->\r\n  <el-dialog\r\n          title=\"添加角色\"\r\n          :visible.sync=\"addDialogVisible\"\r\n          width=\"50%\">\r\n    <!--    内容主题区域-->\r\n    <el-form :model=\"addForm\" :rules=\"addRulesRules\"\r\n             ref=\"addRulesRef\" label-width=\"80px\">\r\n      <el-form-item  label=\"角色名称\" prop=\"roleName\">\r\n        <el-input v-model=\"addForm.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n        <el-input v-model=\"addForm.roleDesc\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"addDialogVisible = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"addRules\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n\r\n  <!--  修改用户的对话框-->\r\n  <el-dialog\r\n          title=\"修改角色\"\r\n          :visible.sync=\"editDialogVisiblle\"\r\n          width=\"50%\">\r\n    <!--    内容主题区域-->\r\n    <el-form :model=\"editForm\" :rules=\"addRulesRules\"\r\n             ref=\"editFormRef\" label-width=\"70px\">\r\n      <el-form-item  label=\"角色名称\" prop=\"roleName\">\r\n        <el-input v-model=\"editForm.roleName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n        <el-input v-model=\"editForm.roleDesc\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"editDialogVisiblle = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"editUserinfo\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n\r\n  <!--  分配权限的对话框-->\r\n  <el-dialog @close=\"setRightDialogClosed\"\r\n          title=\"分配权限\"\r\n          :visible.sync=\"setRightDialogVisiblle\"\r\n          width=\"50%\">\r\n    <!--    树形控件-->\r\n    <el-tree ref=\"treeRef\" :default-checked-keys=\"defkeys\" default-expand-all node-key=\"id\" show-checkbox :data=\"rightsList\" :props=\"treeProps\" ></el-tree>\r\n    <!--    底部区域-->\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--   按钮关闭属性   @click=\"addDialogVisible = false\"-->\r\n    <el-button @click=\"editDialogVisiblle = false\">取消</el-button>\r\n    <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Roles\",\r\n    data() {\r\n      //验证邮箱校验规则\r\n      let checkEmail=(rule,value,callback)=>{\r\n        const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n        if(regEmail.test(value)){\r\n          //合法的邮箱\r\n          return callback()\r\n        }\r\n        callback(new Error('请输入合法的邮箱'))\r\n      }\r\n      //验证手机号校验规则\r\n      let checkMobile=(rule,value,callback)=>{\r\n        // 验证手机号的正则表达式\r\n        const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n        //如果regMobile的test方法中value经过校验合法的手机号\r\n        if (regMobile.test(value)) {\r\n          //执行callback方法\r\n          return callback()\r\n        }\r\n\r\n        callback(new Error('请输入合法的手机号'))\r\n      }\r\n      return {\r\n        //所有角色列表数据\r\n        rolelist: [],\r\n        //添加角色的表单数据\r\n        addForm: {\r\n          roleId: '',\r\n          roleName: '',\r\n          roleDesc: ''\r\n        },\r\n        //查询到的角色信息对象\r\n        editForm:{},\r\n        //控制添加角色对话框的显示和隐藏\r\n        addDialogVisible: false,\r\n        //控制修改用户对话框的显示和隐藏\r\n        editDialogVisiblle:false,\r\n        //控制分配权限对话框的显示和隐藏\r\n        setRightDialogVisiblle:false,\r\n        //所有权限的数据\r\n        rightsList:[],\r\n        //树形控件的属性绑定对象\r\n        treeProps:{\r\n          //label展示可看到的属性\r\n          label:'authName',\r\n          //父子节点通过children属性实现嵌套\r\n          children:'children'\r\n        },\r\n        //默认选中节点的id值数组\r\n        defkeys:[],\r\n        //当前即将分配权限的角色id\r\n        roleId:'',\r\n        //添加用户表单的规则对象\r\n        addRulesRules: {\r\n          roleName: [\r\n            {required: true, message: '请输入角色名', trigger: 'blur'},\r\n            {min: 3, max: 10, message: '用户名长度在 3 到 10 个字符之间', trigger: 'blur'}\r\n          ],\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.getRolesList()\r\n    },\r\n    methods: {\r\n      //获取所有角色的列表\r\n      getRolesList() {\r\n        this.$http.get('roles')\r\n          .then(res => {\r\n            // console.log(res.data.data)\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('获取角色列表失败');\r\n            }\r\n            this.rolelist = res.data.data\r\n          })\r\n      },\r\n      //点击按钮，添加角色\r\n      addRules() {\r\n        this.$refs.addRulesRef.validate((valid) => {\r\n          // console.log(valid)\r\n          if (!valid) return\r\n          //可以发起添加用户的请求\r\n          this.$http.post('roles', this.addForm)\r\n            .then(res => {\r\n              // console.log(this.addRules)\r\n              console.log(res)\r\n              if (res.data.meta.status !== 201) {\r\n                return this.$message.error('添加用户失败');\r\n              }\r\n              this.$message.success('添加用户成功')\r\n              //隐藏添加用户的对话框\r\n              this.addDialogVisible = false\r\n              //重新获取用户列表\r\n              this.getRolesList()\r\n            })\r\n        })\r\n      },\r\n      //展示编辑角色的对话框\r\n      showEditDialog(id){\r\n        // console.log( id)\r\n        this.$http.get('roles/'+id)\r\n          .then(res=> {\r\n            // console.log(res.data.data)\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('查询用户信息失败');\r\n            }\r\n            this.editForm=res.data.data\r\n            this.editDialogVisiblle=true\r\n          })\r\n      },\r\n      //修改角色信息并提交\r\n      editUserinfo(){\r\n      //获取表单预校验结果为true提交\r\n        this.$refs.editFormRef.validate(vaild=>{\r\n          if (!vaild) return\r\n          //发起修改用户信息的数据请求\r\n          this.$http.put(`roles/`+this.editForm.roleId,{\r\n            roleName:this.editForm.roleName,\r\n            roleDesc:this.editForm.roleDesc\r\n          })\r\n            .then(res=> {\r\n              if (res.data.meta.status !== 200) {\r\n                return this.$message.error('更新用户信息失败');\r\n              }\r\n              this.$message.success('更新用户信息成功')\r\n              //隐藏添加用户的对话框\r\n              this.editDialogVisiblle=false\r\n              //重新获取用户列表\r\n              this.getRolesList()\r\n            })\r\n        })\r\n      },\r\n      //根据id删除对应的角色信息\r\n      removeById(id){\r\n        //弹框询问是否删除\r\n        this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$http.delete(`roles/`+id)\r\n            .then(res=> {\r\n              if (res.data.meta.status !== 200) {\r\n                return this.$message.error('删除角色失败');\r\n              }\r\n              this.$message.success('删除角色成功')\r\n              //删除成功后刷新数据列表\r\n              this.getRolesList();\r\n            })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      //根据id删除对应的权限\r\n      removeRightByid(role,rightId){\r\n       //弹框提示是否删除\r\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          });\r\n          this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n            .then(res=> {\r\n              // console.log(res.data)\r\n              // console.log(role.children)\r\n              if (res.data.meta.status !== 200) {\r\n                return this.$message.error('删除角色失败');\r\n              }\r\n              //删除成功后刷新数据列表\r\n              role.children=res.data.data\r\n            })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      //展示分配权限的对话框\r\n      showSetRightDialog(role){\r\n        //保存选中节点id\r\n        this.roleId=role.id\r\n        //获取所有权限数据\r\n        this.$http.get('rights/tree')\r\n          .then(res=> {\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('获取权限列表失败');\r\n            }\r\n            //把获取到的权限数据保存到data中\r\n            this.rightsList=res.data.data\r\n            // console.log(this.rightsList)\r\n          })\r\n        //递归获取三级节点\r\n        this.getLeafKeys(role,this.defkeys)\r\n        this.setRightDialogVisiblle=true\r\n      },\r\n      //通过递归的形式获取角色下所有三级权限的id\r\n      //并保存到defkeys数组中\r\n      getLeafKeys(node,arr){\r\n      //如果当前node节点不包含children属性\r\n      //则是三级节点\r\n        if(!node.children){\r\n          return arr.push(node.id)\r\n        }\r\n\r\n        node.children.forEach(item=>\r\n          this.getLeafKeys(item,arr))\r\n      },\r\n      //监听分配权限对话框的关闭事件\r\n      setRightDialogClosed(){\r\n        this.defkeys=[]\r\n      },\r\n      //点击确定为角色分配权限 ...展开运算符\r\n      allotRights(){\r\n        const keys=[\r\n          ...this.$refs.treeRef.getCheckedKeys(),\r\n          ...this.$refs.treeRef.getHalfCheckedKeys()\r\n        ]\r\n        const idStr=keys.join(',')\r\n        this.$http.post(`roles/${this.roleId}/rights`,{\r\n          rids:idStr\r\n        })\r\n          .then(res=> {\r\n            // console.log(res)\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error('分配权限失败');\r\n            }\r\n            this.$message.success('分配权限成功')\r\n            this.getRolesList()\r\n            this.setRightDialogVisiblle=false\r\n          })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.el-tag{\r\n  margin: 7px;\r\n}\r\n.bdtop{\r\n  border-top: 1px solid #eee;\r\n}\r\n.bdbottpm{\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.vcenter{\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>"],"sourceRoot":"src/views/power"}]}