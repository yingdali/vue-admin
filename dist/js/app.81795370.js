(function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},o={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0363":function(e,t,r){},"31bb":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],s=(r("5c0b"),r("2877")),i={},l=Object(s["a"])(i,o,n,!1,null,null,null),u=l.exports,c=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[e._m(0),r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),r("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v("重置")])],1)],1)],1)],1)])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar_box"},[a("img",{attrs:{src:r("cf05"),alt:""}})])}],p={name:"Login",data:function(){return{loginForm:{username:"admin",password:"123456"},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]}}},methods:{resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate((function(t){console.log(t),1==t?e.$http.post("login",e.loginForm).then((function(t){if(console.log(t),200==t.status){e.$message.success("登录成功"),console.log(t.data.data.token);var r=t.data.data.token;window.sessionStorage.setItem("token",r),e.$router.push("/home")}})):e.$message.error("登录失败")}))}}},f=p,g=(r("8dee"),Object(s["a"])(f,d,m,!1,null,"952560c8",null)),b=g.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",[a("img",{attrs:{src:r("cf05"),alt:""}}),a("span",[e._v("电商后台管理系统")])]),a("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{staticStyle:{height:"580px"},attrs:{width:e.isCollapse?"64px":"200px"}},[a("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),a("el-menu",{attrs:{"background-color":"#333744","unique-opened":"","text-color":"#fff","active-text-color":"#409EFF",collapse:e.isCollapse,"collapse-transition":!1,router:!0,"default-active":e.$route.path}},e._l(e.menulist,(function(t){return a("el-submenu",{key:t.id,staticStyle:{"padding-left":"15px"},attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.iconsObj[t.id]}),a("span",{staticStyle:{"padding-left":"10px"}},[e._v(e._s(t.authName))])]),e._l(t.children,(function(t){return a("el-menu-item",{attrs:{index:"/"+t.path}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.authName))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},v=[],_={name:"Home",data:function(){return{isCollapse:!1,menulist:[],iconsObj:{125:"iconfont icon-user",103:"iconfont icon-tijikongjian",101:"iconfont icon-shangpin",102:"iconfont icon-danju",145:"iconfont icon-baobiao"}}},created:function(){this.getMenuList()},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},getMenuList:function(){var e=this;this.$http.get("menus").then((function(t){200==t.status?e.menulist=t.data.data:e.$message.error(t.data.meta.msg)}))}}},w=_,y=(r("8af0"),Object(s["a"])(w,h,v,!1,null,"5c8d0494",null)),x=y.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("111")])},$=[],k={name:"Welcome"},C=k,j=Object(s["a"])(C,F,$,!1,null,"763a6277",null),q=j.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.quertInfo.query,callback:function(t){e.$set(e.quertInfo,"query",t)},expression:"quertInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist,stripe:"",border:""}},[r("el-table-column",{attrs:{label:"序号",type:"index",width:"60px"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.userStateChanged(a)}},model:{value:a.mg_state,callback:function(t){e.$set(a,"mg_state",t)},expression:"row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(a.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.removeById(a.id)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.quertInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.quertInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.resetform}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisiblle,width:"50%"},on:{"update:visible":function(t){e.editDialogVisiblle=t}}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",disabled:""}},[r("el-input",{model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.resetform}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editDialogVisiblle}},[e._v("确 定")])],1)],1)],1)},O=[],L=(r("99af"),{name:"Users",data:function(){var e=function(e,t,r){var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(a.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){var a=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(a.test(t))return r();r(new Error("请输入合法的手机号"))};return{quertInfo:{query:"",pagenum:1,pagesize:2},userlist:[],total:0,addDialogVisible:!1,editDialogVisiblle:!1,editForm:{},addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名长度在 3 到 10 个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6到 15个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;this.$http.get("users",{params:this.quertInfo}).then((function(t){if(200!==t.status)return e.$message.error(t.data.meta.msg);e.userlist=t.data.data.users,e.total=t.data.data.total}))},handleSizeChange:function(e){this.quertInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){console.log(e),this.quertInfo.pagenum=e,this.getUserList()},userStateChanged:function(e){var t=this;this.$http.put("users/".concat(e.id,"/state/").concat(e.mg_state)).then((function(r){if(200!==r.data.meta.status)return e.mg_state,e.mg_state,t.$message.error("更新用户状态失败");t.$message.success("更新用户状态成功")}))},resetform:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate((function(t){t&&e.$http.post("users",e.addForm).then((function(t){if(console.log(e.addForm),console.log(t),201!==t.data.meta.status)return e.$message.error("添加用户失败");e.$message.success("添加用户成功"),e.addDialogVisible=!1,e.getUserList()}))}))},showEditDialog:function(e){var t=this;console.log(e),this.$http.get("users/"+e).then((function(e){if(console.log(e.data.data),200!==e.data.meta.status)return t.$message.error("查询用户信息失败");t.editForm=e.data.data,t.editDialogVisiblle=!0}))},removeById:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.delete("users/"+e).then((function(e){if(console.log(e),200!==e.data.meta.status)return t.$message.error("删除用户失败");t.$message.success("删除用户成功"),t.getUserList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}}),R=L,z=Object(s["a"])(R,S,O,!1,null,"42561ea2",null),E=z.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-table",{attrs:{data:e.rightsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),r("el-table-column",{attrs:{label:"路径",prop:"path"}}),r("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["0"===a.level?r("el-tag",[e._v("一级")]):"1"===a.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},D=[],U={name:"Rights",data:function(){return{rightsList:[]}},created:function(){this.getrRightsList()},methods:{getrRightsList:function(){var e=this;this.$http.get("rights/list").then((function(t){if(200!==t.data.meta.status)return e.$message.error("获取权限列表失败");e.rightsList=t.data.data}))}}},V=U,P=Object(s["a"])(V,I,D,!1,null,"d1cc6eda",null),M=P.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},A=[],B={name:"Roles"},N=B,Z=Object(s["a"])(N,T,A,!1,null,"b5f6495a",null),J=Z.exports;a["default"].use(c["a"]);var H=[{path:"/",redirect:"/login"},{path:"/login",component:b},{path:"/home",component:x,redirect:"/welcome",children:[{path:"/welcome",component:q},{path:"/users",component:E},{path:"/rights",component:M},{path:"/roles",component:J}]}],W=new c["a"]({routes:H,mode:"history"});W.beforeEach((function(e,t,r){var a=window.sessionStorage.getItem("token");"/login"===e.path||a?r():r("/login")}));var G=W,K=r("2f62");a["default"].use(K["a"]);var Q=new K["a"].Store({state:{},mutations:{},actions:{},modules:{}}),X=(r("82da"),r("aede"),r("5c96")),Y=r.n(X),ee=(r("0fae"),r("bc3a")),te=r.n(ee);te.a.defaults.baseURL="http://timemeetyou.com:8889/api/private/v1/",te.a.interceptors.request.use((function(e){return e.headers.Authorization=window.sessionStorage.getItem("token"),e})),a["default"].prototype.$http=te.a,a["default"].use(Y.a),a["default"].config.productionTip=!1,new a["default"]({router:G,store:Q,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"82da":function(e,t,r){},"8af0":function(e,t,r){"use strict";r("31bb")},"8dee":function(e,t,r){"use strict";r("0363")},"9c0c":function(e,t,r){},aede:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.81795370.js.map